Run echo "ðŸ” Testing application health..."
  echo "ðŸ” Testing application health..."
  max_attempts=30
  attempt=0
  
  while [ $attempt -lt $max_attempts ]; do
    echo "Attempt $((attempt+1))/$max_attempts"
    
    # Test login page
    response=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8080/pages/login.php 2>&1 || echo "000")
    
    if [ "$response" = "200" ]; then
      echo "âœ… Application is healthy (HTTP 200)"
      exit 0
    fi
    
    echo "Got HTTP $response, retrying..."
    attempt=$((attempt+1))
    sleep 2
  done
  
  echo "âŒ Health check failed"
  docker compose logs --tail=50
  exit 1
  shell: /usr/bin/bash -e {0}
  env:
    PROJECT_PATH: /home/fathur/ogani_website
ðŸ” Testing application health...
Attempt 1/30
Got HTTP 404, retrying...
Attempt 2/30
Got HTTP 404, retrying...
Attempt 3/30
Got HTTP 404, retrying...
Attempt 4/30
Got HTTP 404, retrying...
Attempt 5/30
Got HTTP 404, retrying...
Attempt 6/30
Got HTTP 404, retrying...
Attempt 7/30
Got HTTP 404, retrying...
Attempt 8/30
Got HTTP 404, retrying...
Attempt 9/30
Got HTTP 404, retrying...
Attempt 10/30
Got HTTP 404, retrying...
Attempt 11/30
Got HTTP 404, retrying...
Attempt 12/30
Got HTTP 404, retrying...
Attempt 13/30
Got HTTP 404, retrying...
Attempt 14/30
Got HTTP 404, retrying...
Attempt 15/30
Got HTTP 404, retrying...
Attempt 16/30
Got HTTP 404, retrying...
Attempt 17/30
Got HTTP 404, retrying...
Attempt 18/30
Got HTTP 404, retrying...
Attempt 19/30
Got HTTP 404, retrying...
Attempt 20/30
Got HTTP 404, retrying...
Attempt 21/30
Got HTTP 404, retrying...
Attempt 22/30
Got HTTP 404, retrying...
Attempt 23/30
Got HTTP 404, retrying...
Attempt 24/30
Got HTTP 404, retrying...
Attempt 25/30
Got HTTP 404, retrying...
Attempt 26/30
Got HTTP 404, retrying...
Attempt 27/30
Got HTTP 404, retrying...
Attempt 28/30
Got HTTP 404, retrying...
Attempt 29/30
Got HTTP 404, retrying...
Attempt 30/30
Got HTTP 404, retrying...
âŒ Health check failed
mysql-1  | 2025-11-29 16:39:47+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.44-1.el9 started.
mysql-1  | 2025-11-29 16:39:47+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
mysql-1  | 2025-11-29 16:39:47+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.44-1.el9 started.
mysql-1  | '/var/lib/mysql/mysql.sock' -> '/var/run/mysqld/mysqld.sock'
Warning: | 2025-11-29T16:39:48.585643Z 0 [Warning] [MY-011068] [Server] The syntax '--skip-host-cache' is deprecated and will be removed in a future release. Please use SET GLOBAL host_cache_size=0 instead.
mysql-1  | 2025-11-29T16:39:48.588711Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.44) starting as process 1
mysql-1  | 2025-11-29T16:39:48.605828Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.
mysql-1  | 2025-11-29T16:39:49.345606Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.
Warning: | 2025-11-29T16:39:49.845268Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.
mysql-1  | 2025-11-29T16:39:49.845325Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel.
Warning: | 2025-11-29T16:39:49.848548Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysql-1  | 2025-11-29T16:39:49.915036Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Bind-address: '::' port: 33060, socket: /var/run/mysqld/mysqlx.sock
mysql-1  | 2025-11-29T16:39:49.915198Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: '8.0.44'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server - GPL.
php-1    | [29-Nov-2025 16:39:48] NOTICE: [pool www] 'user' directive is ignored when FPM is not running as root
php-1    | [29-Nov-2025 16:39:48] NOTICE: [pool www] 'user' directive is ignored when FPM is not running as root
php-1    | [29-Nov-2025 16:39:48] NOTICE: [pool www] 'group' directive is ignored when FPM is not running as root
php-1    | [29-Nov-2025 16:39:48] NOTICE: [pool www] 'group' directive is ignored when FPM is not running as root
php-1    | [29-Nov-2025 16:39:48] NOTICE: fpm is running, pid 1
php-1    | [29-Nov-2025 16:39:48] NOTICE: ready to handle connections
phpmyadmin-1  | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.18.0.3. Set the 'ServerName' directive globally to suppress this message
phpmyadmin-1  | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.18.0.3. Set the 'ServerName' directive globally to suppress this message
phpmyadmin-1  | [Sat Nov 29 16:39:48.123407 2025] [mpm_prefork:notice] [pid 1:tid 1] AH00163: Apache/2.4.65 (Debian) PHP/8.3.26 configured -- resuming normal operations
phpmyadmin-1  | [Sat Nov 29 16:39:48.123459 2025] [core:notice] [pid 1:tid 1] AH00094: Command line: 'apache2 -D FOREGROUND'
nginx-1       | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-1       | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-1       | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx-1       | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx-1       | 10-listen-on-ipv6-by-default.sh: info: /etc/nginx/conf.d/default.conf differs from the packaged version
nginx-1       | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-1       | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-1       | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-1       | /docker-entrypoint.sh: Configuration complete; ready for start up
nginx-1       | 2025/11/29 16:39:48 [warn] 1#1: duplicate MIME type "text/html" in /etc/nginx/conf.d/default.conf:19
nginx-1       | nginx: [warn] duplicate MIME type "text/html" in /etc/nginx/conf.d/default.conf:19
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: using the "epoll" event method
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: nginx/1.29.3
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: built by gcc 14.2.0 (Alpine 14.2.0) 
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: OS: Linux 6.6.87.2-microsoft-standard-WSL2
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker processes
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 29
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 30
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 31
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 32
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 33
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 34
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 35
Notice:       | 2025/11/29 16:39:48 [notice] 1#1: start worker process 36
Error: Process completed with exit code 1.